<!-- version: 2025-10-01 | Hanyang Intercollege FAQ (51문항, MSC/기초과학 키워드 보강, Q9 답변 교체, Q51 추가) -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hanyang Intercollege 전공선택 관련 FAQ</title>
  <meta name="description" content="2025학번 한양인터칼리지 전공선택·졸업요건 정적 FAQ 검색기" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
  <meta http-equiv="Pragma" content="no-cache"/>
  <meta http-equiv="Expires" content="0"/>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>❓</text></svg>">
  <style>
    :root{
      --bg:#0b0c0f; --panel:#111318; --muted:#96a0b5; --text:#e8ecf3;
      --brand:#5aa9ff; --chip:#1b2330; --chip-on:#23405f;
      --ok:#3ddc97; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.25);
    }
    @media (prefers-color-scheme:light){
      :root{
        --bg:#f7f9fc; --panel:#ffffff; --muted:#64748b; --text:#0f172a;
        --brand:#2563eb; --chip:#edf2f7; --chip-on:#dbeafe;
        --shadow:0 10px 26px rgba(2,6,23,.08);
      }
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, '맑은 고딕', sans-serif;
      background:linear-gradient(180deg, var(--bg), #0c1017 60%); color:var(--text);
    }
    .wrap{ max-width:980px; margin:40px auto; padding:0 20px; }
    .hero{
      background: radial-gradient(1200px 500px at 10% -20%, rgba(90,169,255,.25), transparent 60%),
                  radial-gradient(900px 400px at 100% 20%, rgba(61,220,151,.18), transparent 60%);
      padding: 28px 24px; border-radius: var(--radius); box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.06); backdrop-filter: blur(6px);
    }
    .hero h1{margin:0 0 8px; font-size: clamp(22px, 3.2vw, 34px)}
    .hero p{margin:0; color:var(--muted)}
    .searchbar{ display:flex; gap:10px; margin-top:18px; flex-wrap:wrap; }
    .searchbar input[type="search"]{
      flex:1; min-width:220px; padding:14px 16px; border-radius: 12px;
      border:1px solid rgba(255,255,255,.1); background: var(--panel); color:var(--text);
      outline:none; box-shadow: inset 0 0 0 2px transparent; transition: box-shadow .2s,border-color .2s;
    }
    .searchbar input[type="search"]::placeholder{color:var(--muted)}
    .searchbar input[type="search"]:focus{box-shadow: inset 0 0 0 2px var(--brand)}
    .btn{
      padding: 12px 16px; border-radius:12px; border:0; cursor:pointer;
      background: var(--brand); color:white; font-weight:600; box-shadow: var(--shadow);
    }
    .toolbar{ margin-top:16px; display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px; background:var(--chip);
      border:1px solid rgba(255,255,255,.08); color:var(--text); cursor:pointer;
      user-select:none; transition: transform .05s ease, background .2s; font-size:14px;
    }
    .chip[data-on="true"]{ background: var(--chip-on); border-color: rgba(80,150,255,.45)}
    .chip:active{ transform: scale(.98)}
    .panel{
      margin-top:26px; background:var(--panel); border-radius:var(--radius);
      border:1px solid rgba(255,255,255,.08); box-shadow: var(--shadow);
    }
    .meta{
      display:flex; justify-content:space-between; align-items:center; padding:14px 18px;
      border-bottom:1px dashed rgba(255,255,255,.1); color:var(--muted); font-size:14px;
    }
    .results{ padding: 10px 14px 6px; }
    .card{ border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:14px 14px;
           margin: 12px 6px; background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%); }
    .qline{ display:flex; gap:10px; align-items:flex-start; }
    .qline h3{ margin:0; font-size:18px; line-height:1.35; }
    .badge{ font-size:12px; font-weight:700; color:#0a0a0a; background:var(--ok); padding:4px 8px; border-radius:999px; }
    .alink{ margin-left:auto; display:inline-flex; gap:6px; align-items:center; color:var(--brand);
            cursor:pointer; font-size:13px; }
    .answer{margin-top:10px; color:var(--text); line-height:1.6}
    .answer .hl{ background:rgba(255,230,150,.6); padding:0 2px; border-radius:4px}
    .tags{ margin-top:10px; display:flex; flex-wrap:wrap; gap:6px}
    .tag{ font-size:12px; color:var(--muted); background: rgba(255,255,255,.06); padding:4px 8px; border-radius:999px;
          border:1px solid rgba(255,255,255,.06) }
    .empty{ padding:22px; color:var(--muted) }
    .footer{ margin: 20px 0 60px; color:var(--muted); font-size:13px; text-align:center; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <h1>Hanyang Intercollege 전공선택 관련 FAQ</h1>
      <p>전공 선택 · 다(부)전공 · MSC · 프로젝트 · 졸업요건 등 핵심 질의응답을 키워드/태그로 빠르게 찾아보세요.</p>

      <form id="searchForm" class="searchbar" role="search">
        <label class="sr-only" for="q">검색어</label>
        <input id="q" type="search" placeholder="예) MSC 전공학점, 주전공 변경, 커리어개발2" autocomplete="off" />
        <button id="searchBtn" class="btn" type="submit" title="검색">검색</button>
        <button id="clearBtn" class="btn" type="button" title="검색 지우기">지우기</button>
        <button id="shareBtn" class="btn" type="button" title="현재 검색 링크 복사">링크 복사</button>
      </form>

      <div id="tagBar" class="toolbar" aria-label="태그 필터"></div>
    </section>

    <section class="panel" aria-live="polite" aria-busy="false">
      <div class="meta">
        <div><span id="count">0</span>건 결과</div>
        <div>정확도순 · 태그/키워드 동시 필터링</div>
      </div>
      <div id="results" class="results"></div>
    </section>

    <p class="footer">자료 출처: 2025학번 한양인터칼리지 FAQ/안내 (최신본 반영). 본 페이지는 비공식 안내이며, 최종 기준은 학교 공식 공지입니다.</p>
  </div>

  <script>
    /* =========================
       1) FAQ 데이터 (50문항 + 신규 1문항 = 51개, 최신본 반영)
       - MSC 키워드에 '전공기초필수' 추가
       - id:9 답변 교체
       - id:51 신규 문항 추가
       ========================= */
    const faqData = [
      // 주전공/프로젝트
      {id:"1", q:"한양인터칼리지 주전공 시 프로젝트 이수 요건은?", a:"1·2·3·4학년 프로젝트를 모두 이수합니다. 2·3학년 프로젝트는 한양인터칼리지 전공학점으로 인정됩니다.", kw:["주전공","프로젝트","2학년","3학년","전공학점"], tags:["#주전공","#프로젝트","#전공학점"]},
      {id:"2", q:"타 단과대학 주전공 시 프로젝트 이수 요건은?", a:"1학년(3학점), 4학년(12학점) 프로젝트만 필수입니다. 2·3학년 프로젝트는 필수가 아니며 장학 대상에서 제외됩니다.", kw:["타과","프로젝트","1학년","4학년","장학"], tags:["#프로젝트","#주전공","#장학"]},
      {id:"3", q:"한양인터칼리지 주전공의 2·3학년 프로젝트 학점 반영은?", a:"각 3학점이며 전공학점에 포함됩니다.", kw:["2학년","3학년","전공학점","프로젝트"], tags:["#프로젝트","#전공학점"]},
      {id:"4", q:"타과 주전공은 2·3학년 프로젝트 수강 가능?", a:"필수는 아니며, 다전공으로 해당 과목을 수강해 학점 취득은 가능하나 프로젝트 장학금은 제외됩니다.", kw:["다전공","프로젝트","장학","수강"], tags:["#프로젝트","#장학"]},
      {id:"5", q:"프로젝트 장학금 지급 조건은?", a:"한양인터칼리지 2·3학년 프로젝트 이수를 조건으로 지급됩니다. 타과 주전공자는 대상에서 제외됩니다.", kw:["프로젝트 장학금","장학","이수 조건"], tags:["#장학","#프로젝트"]},

      // MSC/기초과학 (요청: MSC 키워드에 '전공기초필수' 추가)
      {id:"6", q:"MSC(기초과학) 과목은 전공학점으로 인정되나요?", a:"아니요. 미분적분학·일반화학및실험·일반물리학및실험 등 MSC 과목은 전공학점으로 인정되지 않고 전체 졸업학점으로만 인정됩니다.", kw:["MSC","미분적분학","일반화학및실험","일반물리학및실험","전공학점","전공기초필수"], tags:["#MSC","#졸업요건"]},
      {id:"7", q:"MSC 과목 목록은?", a:"미분적분학, 일반화학및실험, 일반물리학및실험 관련 교과목입니다.", kw:["MSC","과목","미분적분학","일반화학","일반물리","전공기초필수"], tags:["#MSC"]},
      {id:"8", q:"공대·자연대 주전공자가 1학년 MSC 과목을 들으면?", a:"전공학점이 아니라 전체 졸업학점으로만 인정됩니다.", kw:["공과대학","자연과학대학","MSC","전공학점","전공기초필수"], tags:["#MSC","#졸업요건"]},
      {id:"9", q:"MSC가 아닌 전공기초필수 과목은 전공학점 인정?", a:"네. 주전공으로 선택한 학부(과)에 개설된 기초과학이 아닌 전공기초필수 과목은 주전공 전공학점(48학점)에 포함됩니다.", kw:["전공기초필수","전공학점","48학점","MSC 아님","전공기초필수"], tags:["#전공기초필수","#전공학점"]},

      // 교양/필수 공통
      {id:"10", q:"1학년 교양필수는 몇 학점인가요?", a:"한양인터칼리지 1학년 공통 교양필수는 35학점입니다.", kw:["교양필수","1학년","35학점"], tags:["#교양필수","#1학년"]},
      {id:"11", q:"핵심교양·사회봉사·커리어개발2 이수 기준은?", a:"핵심교양 4학점, 사회봉사 1학점, 커리어개발2 1학점입니다.", kw:["핵심교양","사회봉사","커리어개발2","이수"], tags:["#교양필수"]},
      {id:"12", q:"타과 주전공 선택 시 1학년 전공기초필수는 면제되나요?", a:"네. 1학년 전공기초필수는 면제되고, 1학년 필수는 한양인터칼리지 지정 교양필수로 충족합니다.", kw:["타과","전공기초필수","면제","교양필수"], tags:["#전공기초필수","#교양필수"]},
      {id:"13", q:"커리어개발2는 어느 학과 개설 과목을 들어야 하나요?", a:"선택한 주전공 학부(과)에서 개설한 커리어개발2를 수강해야 합니다.", kw:["커리어개발2","주전공 학과","교양필수"], tags:["#커리어개발","#교양필수"]},
      {id:"14", q:"교양필수에서 F를 받으면?", a:"졸업 전까지 재수강하여 학점을 취득해야 합니다.", kw:["교양필수","F","재수강","졸업"], tags:["#교양필수","#졸업요건"]},

      // 주전공 신청/자격/변경
      {id:"15", q:"주전공 신청 자격(2025학번)은?", a:"주전공 신청 학기에 재학 중이며 누적 평점 평균 2.0 이상이면 신청 가능합니다.", kw:["주전공","신청 자격","누적평점","2.0"], tags:["#주전공","#성적"]},
      {id:"16", q:"1학년 공통에서 F가 있어도 주전공 신청 가능?", a:"누평 2.0 이상이면 신청 가능하나, F 받은 교양필수는 졸업 전 반드시 재수강해야 합니다.", kw:["F","누적평점","재수강","주전공"], tags:["#성적","#주전공","#교양필수"]},
      {id:"17", q:"주전공은 성적 경쟁이 있나요?", a:"자격 충족 시 전원 선발하며 계열 제한 없이 희망 전공을 자유롭게 선택합니다.", kw:["성적경쟁","전원 선발","자유선택"], tags:["#주전공","#선발"]},
      {id:"18", q:"주전공 선택/변경은 몇 번 가능?", a:"재학 중 총 2회(2학기 중(10월) 최초 선택 + 졸업 전 1회 변경) 가능합니다.", kw:["주전공 변경","2회","10월","졸업 전"], tags:["#주전공","#변경"]},
      {id:"19", q:"전공 선택이 불가능한 학과는?", a:"의과대학, 간호학과, 사범대학, 음악대학, 예술·체육대학 학부(과), 산업체 계약학과(반도체공학과)는 선택 불가입니다.", kw:["의대","간호","사범","음악","예술","체육","반도체공학"], tags:["#제한전공"]},

      // 다전공/부전공/프로그램
      {id:"20", q:"한양인터칼리지 학생은 프로그램 부전공이 필수인가요?", a:"네. 어떤 주전공이든 한양인터칼리지 프로그램 교육과정 1개 이상을 부전공(24학점 이상) 이상으로 이수해야 합니다.", kw:["프로그램","부전공","24학점","필수"], tags:["#부전공","#프로그램"]},
      {id:"21", q:"주전공 최소 전공학점은?", a:"주전공은 최소 48학점 이상 이수해야 합니다.", kw:["주전공","48학점","전공학점"], tags:["#주전공","#졸업요건"]},
      {id:"22", q:"일반 다중전공 최소 학점과 구성은?", a:"(건축 제외) 전공과목 36학점 이상: 200~300단위 21학점 + 400단위 6학점 포함.", kw:["다중전공","36학점","400단위","200~300단위"], tags:["#다중전공"]},
      {id:"23", q:"건축학부 다중전공 학점 기준은?", a:"100~300단위 60학점 + 400단위 18학점을 포함해 총 100학점 이상입니다.", kw:["건축학부","다중전공","100학점"], tags:["#다중전공","#건축"]},
      {id:"24", q:"프로그램 다중전공의 학점 기준은?", a:"프로그램 다중전공은 지정 과목을 36학점 이상(400단위 6 포함) 이수합니다.", kw:["프로그램 다중전공","36학점","400단위 6"], tags:["#다중전공","#프로그램"]},
      {id:"25", q:"부전공 최소 학점 기준은?", a:"일반 부전공은 21학점(200~400단위 12 포함), 프로그램 부전공은 단위 구분 없이 24학점입니다.", kw:["부전공","21학점","프로그램 부전공 24"], tags:["#부전공","#프로그램"]},
      {id:"26", q:"부전공 대신 다중전공으로 대체 가능?", a:"네. 한양인터칼리지 프로그램 부전공 대신 다중전공으로 졸업요건 충족이 가능합니다.", kw:["부전공 대체","다중전공","졸업요건"], tags:["#다중전공","#부전공"]},
      {id:"27", q:"마이크로전공으로 프로그램 부전공 대체 가능?", a:"아니요. 마이크로전공(12학점)은 프로그램 부전공을 대체할 수 없습니다.", kw:["마이크로전공","12학점","부전공 대체"], tags:["#마이크로전공","#부전공"]},
      {id:"28", q:"프로그램을 주전공으로 선택하면 추가 전공이 필요한가요?", a:"네. 타 단과대학 전공 또는 한양인터칼리지 내 다른 프로그램을 부전공 이상으로 추가 이수해야 합니다.", kw:["프로그램 주전공","부전공 이상","추가 전공"], tags:["#주전공","#부전공","#프로그램"]},

      // 학위/표기/학점/총졸업학점
      {id:"29", q:"졸업 시 학위 표기는?", a:"주전공 단과대학·학부(과) 명칭으로 수여되고, 부·다전공은 졸업증명서에 표기됩니다.", kw:["학위","졸업증명서","표기"], tags:["#졸업요건"]},
      {id:"30", q:"전공 400단위 이수 요건은?", a:"전공 400단위 6학점 이상(주전공 기준) 이수해야 합니다.", kw:["400단위","전공","6학점"], tags:["#전공학점","#졸업요건"]},
      {id:"31", q:"한양인터칼리지 주전공의 4학년 프로젝트 학점 반영은?", a:"4학년 프로젝트(12학점)는 전공학점에 포함되지 않습니다(총졸업학점 반영).", kw:["4학년 프로젝트","12학점","전공학점"], tags:["#프로젝트","#전공학점"]},
      {id:"32", q:"타과 주전공의 4학년 프로젝트 학점은?", a:"4학년 프로젝트(12학점)는 필수 이수이나 전공학점에는 미포함입니다.", kw:["4학년","프로젝트","전공학점 아님"], tags:["#프로젝트"]},
      {id:"33", q:"총 졸업학점은?", a:"총 졸업학점은 140학점입니다.", kw:["졸업학점","140학점"], tags:["#졸업요건"]},

      // 예시/특정 전공 가이드
      {id:"34", q:"예시) 융합전자공학부 주전공 선택 시 유의점은?", a:"1학년 전공기초필수는 면제되지만 MSC 과목은 전공학점 미인정. 2~4학년 전공기초필수(선형대수·공업수학1·2 등)는 필수 이수입니다.", kw:["융합전자공학부","MSC","선형대수","공업수학"], tags:["#공대","#MSC","#전공기초필수"]},
      {id:"35", q:"선형대수·공업수학 같은 과목의 위치는?", a:"해당 전공의 전공기초필수(2~4학년)로 편성되며 주전공 전공학점(48학점)에 포함됩니다.", kw:["선형대수","공업수학","전공기초필수","48학점"], tags:["#전공기초필수","#전공학점"]},

      // 일정/절차 (안내문 기준 예시, 실제 공지 우선)
      {id:"36", q:"전공설명회 수요조사 일정은?", a:"예시: 2025.09.18~09.22. 세부는 학교 공지를 확인하세요.", kw:["전공설명회","수요조사","일정"], tags:["#일정","#전공설명회"]},
      {id:"37", q:"전공설명회 본행사는?", a:"10월 중 예정(추후 별도 안내).", kw:["전공설명회","일정","10월"], tags:["#일정","#전공설명회"]},
      {id:"38", q:"주전공 선택 신청 기간은?", a:"예시: 2025.10.30~11.05.", kw:["주전공","선택신청","일정"], tags:["#일정","#주전공"]},
      {id:"39", q:"다중전공 선택 신청 기간은?", a:"예시: 2025.11.10~11.14.", kw:["다중전공","선택신청","일정"], tags:["#일정","#다중전공"]},
      {id:"40", q:"주전공/다중전공 확정 및 심의 시점은?", a:"예시: 2026.01 자격요건 심의 후 확정.", kw:["자격요건","심의","확정"], tags:["#일정","#주전공","#다중전공"]},
      {id:"41", q:"온라인 신청 절차는?", a:"학내 포털/공지 절차에 따릅니다. 제출서류·승인 플로우는 공지 확인이 필요합니다.", kw:["신청 절차","온라인","포털"], tags:["#일정","#절차"]},

      // 성적/평점/재수강
      {id:"42", q:"누적 평점 2.0 미만이면 주전공 신청 불가?", a:"네. 신청 학기 재학 중이며 누적 평점 2.0 이상이어야 합니다.", kw:["누적평점","2.0","주전공 신청"], tags:["#성적","#주전공"]},
      {id:"43", q:"F가 있어도 졸업 가능?", a:"교양필수 등 필수 과목에서 F를 받은 경우 반드시 재수강하여 학점을 취득해야 졸업이 가능합니다.", kw:["F","재수강","졸업"], tags:["#졸업요건","#교양필수"]},

      // 태그 안내/검색 팁
      {id:"44", q:"검색 팁: MSC 관련 키워드는?", a:"“MSC, 미분적분학, 일반화학, 일반물리, 전공학점, 기초과학, 전공기초필수” 등을 조합하면 정확도가 높습니다.", kw:["검색팁","MSC","키워드","전공기초필수"], tags:["#MSC","#검색"]},
      {id:"45", q:"검색 팁: 전공학점/전공기초필수는?", a:"“전공학점 48, 전공기초필수, 400단위, 200~300단위” 등의 키워드가 유효합니다.", kw:["검색","전공학점","전공기초필수"], tags:["#검색","#전공학점"]},

      // 프로젝트 세부
      {id:"46", q:"한양인터칼리지 주전공의 1학년 프로젝트 위치는?", a:"1학년 프로젝트(전공핵심 3학점)는 필수입니다. 전공학점 포함 여부는 주전공 유형에 따라 상이합니다.", kw:["1학년 프로젝트","전공핵심","3학점"], tags:["#프로젝트"]},
      {id:"47", q:"타과 주전공의 1·4학년 프로젝트 반영은?", a:"1학년 3학점·4학년 12학점 필수 이수, 전공학점에는 미포함(총졸업학점 반영).", kw:["타과","1학년","4학년","프로젝트"], tags:["#프로젝트"]},
      {id:"48", q:"한양인터칼리지 주전공의 2·3학년 프로젝트 위치는?", a:"각 3학점, 전공학점으로 포함됩니다.", kw:["2학년","3학년","프로젝트","전공학점"], tags:["#프로젝트","#전공학점"]},

      // 1학년 공통 교과 예시(안내문)
      {id:"49", q:"1학년 공통 교과 예시는?", a:"Systems/Design Thinking, Make Core, ACD Thinking, Calculus in Context, Unified Systems Science, Global Critical Anthropology, Life Project 등.", kw:["공통교과","Systems Thinking","Life Project"], tags:["#1학년","#교양필수"]},

      // 종합/주의
      {id:"50", q:"최종 판단 근거는?", a:"항상 최신 ‘학교 공식 공지/규정’을 우선합니다. 본 페이지는 안내 보조용입니다.", kw:["최종근거","공식공지","규정"], tags:["#안내","#주의"]},

      // (신규 추가) 전공기초필수 모두 이수 관련
      {id:"51", q:"전공기초필수를 모두 이수해야 졸업이 가능한거야?", a:"네, 주전공으로 선택한 학부(과)에 개설된 2~4학년 전공기초필수 교과목은 모두 이수해야 졸업자격을 갖추게 됩니다. 1학년 전공기초필수 교과목 이수는 필수는 아니지만 이수 시 주전공 전공학점(48학점)에 포함됩니다", kw:["전공기초필수","졸업요건","2~4학년","1학년","전공학점","48학점","주전공"], tags:["#전공기초필수","#졸업요건","#주전공"]}
    ];

    // 태그 목록
    const allTags = Array.from(new Set(faqData.flatMap(x => x.tags))).sort((a,b)=>a.localeCompare(b,'ko'));

    // =========================
    // 2) DOM
    // =========================
    const qInput    = document.getElementById('q');
    const searchForm= document.getElementById('searchForm');
    const clearBtn  = document.getElementById('clearBtn');
    const shareBtn  = document.getElementById('shareBtn');
    const resultsEl = document.getElementById('results');
    const countEl   = document.getElementById('count');
    const tagBar    = document.getElementById('tagBar');

    // =========================
    // 3) 태그 UI
    // =========================
    const selectedTags = new Set();
    function renderTags(){
      tagBar.innerHTML = '';
      allTags.forEach(tag=>{
        const btn = document.createElement('button');
        btn.className = 'chip'; btn.type='button';
        btn.setAttribute('data-on', selectedTags.has(tag) ? 'true' : 'false');
        btn.textContent = tag;
        btn.addEventListener('click', ()=>{
          if(selectedTags.has(tag)){ selectedTags.delete(tag); btn.setAttribute('data-on','false'); }
          else { selectedTags.add(tag); btn.setAttribute('data-on','true'); }
          update();
        });
        tagBar.appendChild(btn);
      });
    }

    // =========================
    // 4) 검색/스코어링/하이라이트
    // =========================
    const normalize = s => (s ?? '').toString().toLowerCase().replace(/\s+/g,' ').trim();

    function scoreEntry(entry, query){
      const nq = normalize(query);
      if(!nq && selectedTags.size===0) return 1;
      // 태그 AND
      if(![...selectedTags].every(t => entry.tags.includes(t))) return 0;
      if(!nq) return 1;

      let score = 0;
      const hay = normalize(entry.q + ' ' + entry.a + ' ' + entry.kw.join(' '));
      if(hay.includes(nq)) score += 6;
      entry.kw.forEach(k=>{
        const nk = normalize(k);
        if(nk === nq) score += 5;
        else if(nk.includes(nq) || nq.includes(nk)) score += 3;
      });
      nq.split(' ').forEach(tok=>{
        if(tok.length>1 && hay.includes(tok)) score += 1;
      });
      return score;
    }

    function highlight(text, query){
      const nq = normalize(query);
      if(!nq) return text;
      const esc = nq.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      try{ return text.replace(new RegExp(`(${esc})`,'gi'), '<span class="hl">$1</span>'); }
      catch{ return text; }
    }

    // =========================
    // 5) 렌더
    // =========================
    function render(list, query){
      resultsEl.innerHTML = '';
      if(list.length===0){
        resultsEl.innerHTML = `<div class="empty">결과가 없습니다. 검색어를 바꾸거나 태그 선택을 확인해 주세요.</div>`;
        countEl.textContent = '0';
        return;
      }
      countEl.textContent = String(list.length);

      for(const e of list){
        const card = document.createElement('article');
        card.className = 'card'; card.id = `q${e.id}`;
        card.innerHTML = `
          <div class="qline">
            <span class="badge">Q${e.id}</span>
            <h3>${highlight(e.q, query)}</h3>
            <span class="alink" role="button" title="링크 복사" data-id="${e.id}">🔗 복사</span>
          </div>
          <div class="answer">${highlight(e.a, query)}</div>
          <div class="tags">${e.tags.map(t=>`<span class="tag">${t}</span>`).join(' ')}</div>
        `;
        card.querySelector('.alink').addEventListener('click', (ev)=>{
          const id = ev.currentTarget.getAttribute('data-id');
          const url = new URL(location.href);
          url.hash = `#q${id}`;
          const qv = qInput.value.trim();
          if(qv) url.searchParams.set('q', qv); else url.searchParams.delete('q');
          if(selectedTags.size){
            url.searchParams.set('tags', [...selectedTags].join(','));
          }else{
            url.searchParams.delete('tags');
          }
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(url.toString()).then(()=>{
              ev.currentTarget.textContent = '✅ 복사됨';
              setTimeout(()=>{ ev.currentTarget.textContent='🔗 복사'; },1200);
            });
          } else {
            window.prompt("아래 링크를 복사하세요:", url.toString());
          }
        });
        resultsEl.appendChild(card);
      }
    }

    function search(query){
      return faqData
        .map(e => ({entry:e, score:scoreEntry(e, query)}))
        .filter(r => r.score > 0)
        .sort((a,b)=> b.score - a.score)
        .map(r => r.entry);
    }

    function update(pushState=true){
      const q = qInput.value;
      const list = search(q);
      render(list, q);
      if(pushState){
        const url = new URL(location.href);
        if(q.trim()) url.searchParams.set('q', q.trim()); else url.searchParams.delete('q');
        if(selectedTags.size) url.searchParams.set('tags', [...selectedTags].join(','));
        else url.searchParams.delete('tags');
        history.replaceState(null,'',url.toString());
      }
    }

    // =========================
    // 6) 초기화 & 이벤트
    // =========================
    function initFromQuery(){
      const params = new URLSearchParams(location.search);
      const q = params.get('q') || '';
      qInput.value = q;
      const tagQuery = params.get('tags');
      if(tagQuery){ tagQuery.split(',').forEach(t=> selectedTags.add(t)); }
    }

    initFromQuery();
    renderTags();
    update(false);

    searchForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      update();
    });

    qInput.addEventListener('input', ()=>{
      update();
    });

    clearBtn.addEventListener('click', ()=>{
      qInput.value = '';
      selectedTags.clear();
      renderTags();
      update();
    });

    shareBtn.addEventListener('click', ()=>{
      const url = new URL(location.href);
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(url.toString()).then(()=>{
          shareBtn.textContent='복사됨 ✅'; setTimeout(()=>shareBtn.textContent='링크 복사',1200);
        });
      } else {
        window.prompt("아래 링크를 복사하세요:", url.toString());
      }
    });

    if(location.hash){
      const el = document.querySelector(location.hash);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }
  </script>
</body>
</html>
