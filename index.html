<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hanyang Intercollege 전공선택 관련 FAQ</title>
<meta name="description" content="2025학번 한양인터칼리지 전공선택·졸업요건 정적 FAQ 검색기(세분화 80문항, 확장 태그)" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>❓</text></svg>">
<style>
  :root{
    --bg:#0b0c0f; --panel:#111318; --muted:#96a0b5; --text:#e8ecf3;
    --brand:#5aa9ff; --chip:#1b2330; --chip-on:#23405f;
    --ok:#3ddc97; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme:light){
    :root{
      --bg:#f7f9fc; --panel:#ffffff; --muted:#64748b; --text:#0f172a;
      --brand:#2563eb; --chip:#edf2f7; --chip-on:#dbeafe;
      --shadow:0 10px 26px rgba(2,6,23,.08);
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, '맑은 고딕', sans-serif;
    background:linear-gradient(180deg, var(--bg), #0c1017 60%); color:var(--text);
  }
  .wrap{ max-width:1040px; margin:40px auto; padding:0 20px; }
  .hero{
    background: radial-gradient(1200px 500px at 10% -20%, rgba(90,169,255,.25), transparent 60%),
                radial-gradient(900px 400px at 100% 20%, rgba(61,220,151,.18), transparent 60%);
    padding: 28px 24px; border-radius: var(--radius); box-shadow: var(--shadow);
    border: 1px solid rgba(255,255,255,.06); backdrop-filter: blur(6px);
  }
  .hero h1{margin:0 0 8px; font-size: clamp(22px, 3.2vw, 34px)}
  .hero p{margin:0; color:var(--muted)}
  .searchbar{ display:grid; grid-template-columns: 1fr auto auto auto; gap:10px; margin-top:18px; }
  .searchbar input[type="search"]{
    padding:14px 16px; border-radius: 12px; border:1px solid rgba(255,255,255,.1);
    background: var(--panel); color:var(--text); outline:none;
  }
  .btn{
    padding: 12px 16px; border-radius:12px; border:0; cursor:pointer;
    background: var(--brand); color:white; font-weight:600; box-shadow: var(--shadow);
  }
  .filters{
    display:grid; grid-template-columns: 1fr; gap:10px; margin-top:14px;
  }
  .filter-row{
    background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px;
  }
  .filter-row h3{ margin:0 0 8px; font-size:14px; color:var(--muted) }
  .chips{ display:flex; flex-wrap:wrap; gap:8px }
  .chip{
    display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:var(--chip);
    border:1px solid rgba(255,255,255,.08); color:var(--text); cursor:pointer; user-select:none;
    transition: transform .05s ease, background .2s; font-size:14px;
  }
  .chip[data-on="true"]{ background: var(--chip-on); border-color: rgba(80,150,255,.45)}
  .chip:active{ transform: scale(.98)}
  .mode{ display:flex; align-items:center; gap:8px; color:var(--muted); font-size:13px; margin-top:6px}
  .mode input{ margin-right:6px }
  .panel{ margin-top:20px; background:var(--panel); border-radius:var(--radius);
    border:1px solid rgba(255,255,255,.08); box-shadow: var(--shadow); }
  .meta{
    display:flex; justify-content:space-between; align-items:center; padding:14px 18px;
    border-bottom:1px dashed rgba(255,255,255,.1); color:var(--muted); font-size:14px;
  }
  .results{ padding: 10px 14px 6px; }
  .card{ border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:14px 14px; margin: 12px 6px;
         background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%); }
  .qline{ display:flex; gap:10px; align-items:flex-start; }
  .qline h3{ margin:0; font-size:18px; line-height:1.35; }
  .badge{ font-size:12px; font-weight:700; color:#0a0a0a; background:var(--ok); padding:4px 8px; border-radius:999px; }
  .alink{ margin-left:auto; display:inline-flex; gap:6px; align-items:center; color:var(--brand); cursor:pointer; font-size:13px; }
  .answer{margin-top:10px; color:var(--text); line-height:1.6}
  .answer .hl{ background:rgba(255,230,150,.6); padding:0 2px; border-radius:4px}
  .tags{ margin-top:10px; display:flex; flex-wrap:wrap; gap:6px}
  .tag{ font-size:12px; color:var(--muted); background: rgba(255,255,255,.06); padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.06) }
  .empty{ padding:22px; color:var(--muted) }
  .footer{ margin: 20px 0 60px; color:var(--muted); font-size:13px; text-align:center; }
  .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
</style>
</head>
<body>
<div class="wrap">
  <section class="hero">
    <h1>Hanyang Intercollege 전공선택 관련 FAQ</h1>
    <p>전공 선택 · 다(부)전공 · MSC · 프로젝트 · 졸업요건 등 핵심 질의응답을 키워드/태그로 빠르게 찾아보세요.</p>

    <form id="searchForm" class="searchbar" role="search">
      <label class="sr-only" for="q">검색어</label>
      <input id="q" type="search" placeholder="예) MSC 전공학점, 400단위 6, 주전공 변경, 커리어개발2" autocomplete="off" />
      <button id="searchBtn" class="btn" type="submit" title="검색">검색</button>
      <button id="clearBtn" class="btn" type="button" title="검색 지우기">지우기</button>
      <button id="shareBtn" class="btn" type="button" title="현재 검색 링크 복사">링크 복사</button>
    </form>

    <!-- 확장 필터: 카테고리별 태그 + AND/OR -->
    <div class="filters" id="filters"></div>
    <div class="mode">
      <label><input type="radio" name="tagMode" value="AND" checked/> 태그 AND</label>
      <label><input type="radio" name="tagMode" value="OR"/> 태그 OR</label>
    </div>
  </section>

  <section class="panel" aria-live="polite" aria-busy="false">
    <div class="meta">
      <div><span id="count">0</span>건 결과</div>
      <div>정확도순 · 동의어/태그 동시 필터링</div>
    </div>
    <div id="results" class="results"></div>
  </section>

  <p class="footer">자료 출처: 2025학번 한양인터칼리지 FAQ/안내(최신본 반영). 본 페이지는 비공식 안내이며, 최종 기준은 학교 공식 공지입니다.</p>
</div>

<script>
/* =========================
   0) 동의어 사전 (검색 강화)
   ========================= */
const SYNONYMS = {
  "msc": ["기초과학","미분적분학","일반화학","일반물리","calculus","physics","chemistry"],
  "커리어개발2": ["커개2","커리어2"],
  "다중전공": ["복수전공","이중전공","다전공"],
  "부전공": ["마이너","minor"],
  "전공기초필수": ["기초필수","전공기초","기초전공"],
  "전공학점": ["전공 48","48학점","전공 400단위","400단위","200단위","300단위"],
  "전공선택": ["주전공 선택","전공 배정","전공신청","전공 변경"],
  "장학": ["프로젝트 장학금","장학금"],
};

/* =========================
   1) 태그 카테고리
   ========================= */
const TAG_SETS = {
  "전공": ["#주전공","#변경","#선발","#제한전공"],
  "교양·MSC": ["#교양필수","#핵심교양","#사회봉사","#커리어개발","#MSC","#전공기초필수"],
  "다·부전공": ["#다중전공","#부전공","#마이크로전공","#프로그램"],
  "프로젝트": ["#프로젝트","#전공학점"],
  "일정": ["#일정","#전공설명회","#절차"],
  "성적·학점": ["#성적","#학점","#졸업요건"],
  "행정·기타": ["#안내","#주의","#학사행정","#서류"]
};

/* =========================
   2) FAQ 데이터 (세분화 80문항)
   - 정확 수치/규정은 문서 근거 범위만 명시
   - 불확실 영역은 공지/학사팀 확인 권고
   ========================= */
const faqData = [
  // --- 주전공(선택/자격/변경/제한) 1~20 ---
  {id:"1", q:"주전공은 어떻게 선택하나요?", a:"2학기(가을) 일정 내 포털 공지에 따라 신청합니다. 자격요건 충족 시 전원 선발 원칙입니다.", kw:["주전공","선택","전원선발"], tags:["#주전공","#선발","#일정"]},
  {id:"2", q:"주전공 자격요건은?", a:"신청 학기 재학 중이며 누적평점 2.0 이상이어야 합니다.", kw:["자격","누평 2.0"], tags:["#주전공","#성적"]},
  {id:"3", q:"주전공은 성적 경쟁인가요?", a:"자격 충족 시 성적·경쟁률과 무관하게 전원 선발합니다.", kw:["경쟁","전원선발"], tags:["#주전공","#선발"]},
  {id:"4", q:"주전공 변경은 몇 회 가능한가요?", a:"총 2회(2학기 중 최초 선택 + 졸업 전 1회 변경) 가능합니다.", kw:["변경","횟수"], tags:["#주전공","#변경"]},
  {id:"5", q:"전공 선택이 불가능한 학과는?", a:"의과대, 간호학과, 사범대, 음악대, 예술·체육대 학부(과), 산업체 계약학과(반도체공학과)는 불가합니다.", kw:["불가전공"], tags:["#제한전공","#주전공"]},
  {id:"6", q:"타 단과대학 주전공도 가능한가요?", a:"가능합니다. 계열 제한 없이 선택할 수 있습니다.", kw:["타과 주전공"], tags:["#주전공"]},
  {id:"7", q:"주전공 확정 시기는?", a:"예: 2026.01 자격심의 후 확정(매년 공지 우선).", kw:["확정","심의"], tags:["#일정","#주전공"]},
  {id:"8", q:"휴학 중에도 주전공 신청이 가능한가요?", a:"원칙적으로 '신청 학기 재학'이 필요합니다. 휴학 관련 특례는 학사팀에 확인하세요.", kw:["휴학","신청"], tags:["#주의","#학사행정"]},
  {id:"9", q:"전과와 주전공 선택의 차이는?", a:"전과는 소속 변경, 주전공 선택은 인터칼리지 체계 내 첫 전공 선택입니다.", kw:["전과","주전공"], tags:["#주전공","#안내"]},
  {id:"10", q:"주전공 포기 후 재선택 가능한가요?", a:"정해진 변경 1회 범위 내에서만 가능합니다. 초과는 불가합니다.", kw:["포기","재선택"], tags:["#주전공","#변경"]},
  {id:"11", q:"주전공 신청 시 서류가 필요한가요?", a:"일반적으로 온라인 신청으로 충분하나, 추가 서류는 공지에 따릅니다.", kw:["서류","온라인"], tags:["#절차","#학사행정"]},
  {id:"12", q:"주전공 확정 후 교육과정은 언제부터 적용되나요?", a:"확정 학기 이후 해당 학년·학기에 맞춰 적용됩니다.", kw:["적용시점"], tags:["#주전공"]},
  {id:"13", q:"복수 국적·전형에 따른 제한이 있나요?", a:"전형별 특례는 공지사항을 확인하세요(일반 원칙 동일).", kw:["전형","제한"], tags:["#주의","#학사행정"]},
  {id:"14", q:"전공선택 취소/철회는 가능한가요?", a:"일정 내 취소 가능하나, 상세는 해당 공지와 포털 절차를 따릅니다.", kw:["취소","철회"], tags:["#절차","#일정"]},
  {id:"15", q:"전공설명회 참여가 필수인가요?", a:"권장 사항입니다. 수요조사·설명회 일정은 매년 공지됩니다.", kw:["전공설명회"], tags:["#전공설명회","#일정"]},
  {id:"16", q:"전공 선택 후 지도교수 배정은?", a:"단과대·학과 규정에 따라 배정됩니다.", kw:["지도교수"], tags:["#학사행정"]},
  {id:"17", q:"전공선택 시 학년별 이수 트랙은 어디서 보나요?", a:"주전공 학과 교육과정표를 확인하세요(학과 공지/웹사이트).", kw:["이수트랙","커리큘럼"], tags:["#안내"]},
  {id:"18", q:"전공선택과 다중전공 신청은 함께 가능한가요?", a:"보통 순차 진행입니다. 각 공지 일정을 따르세요.", kw:["동시신청"], tags:["#일정","#절차"]},
  {id:"19", q:"해외파견·교환학생이 전공선택에 영향?", a:"학적 상태·일정에 따라 영향 가능. 사전 상담 권장.", kw:["교환학생"], tags:["#주의","#학사행정"]},
  {id:"20", q:"전공선택 결과 이의신청이 가능한가요?", a:"원칙상 전원 선발 체계로 이의는 제한적입니다. 특이 사유는 학사팀에 문의.", kw:["이의신청"], tags:["#학사행정","#주의"]},

  // --- 프로젝트 21~30 ---
  {id:"21", q:"한양인터칼리지 주전공의 프로젝트 이수 체계는?", a:"1·2·3·4학년 모두 필수이며, 2·3학년(각 3학점)은 전공학점 포함입니다.", kw:["프로젝트","전공학점"], tags:["#프로젝트","#전공학점","#주전공"]},
  {id:"22", q:"타과 주전공의 프로젝트 이수 체계는?", a:"1학년(3), 4학년(12) 필수. 전공학점 미포함(총졸업학점 반영).", kw:["타과","프로젝트"], tags:["#프로젝트"]},
  {id:"23", q:"2·3학년 프로젝트 수강 자격은?", a:"한양인터칼리지 주전공자. 타과 주전공은 원칙상 제외(장학 대상도 제외).", kw:["2학년","3학년","장학"], tags:["#프로젝트","#장학"]},
  {id:"24", q:"4학년 프로젝트는 전공학점인가요?", a:"아니요. 12학점이지만 전공학점이 아니라 총졸업학점으로 반영됩니다.", kw:["4학년","12학점"], tags:["#프로젝트","#전공학점"]},
  {id:"25", q:"프로젝트 장학금 기준은?", a:"한양인터칼리지 2·3학년 프로젝트 이수자에게 지급됩니다.", kw:["장학금"], tags:["#장학","#프로젝트"]},
  {id:"26", q:"프로젝트 과목 재수강이 가능한가요?", a:"학칙 기준에 따릅니다. 동일과목 재수강은 성적표시 규정을 확인하세요.", kw:["재수강"], tags:["#학사행정","#프로젝트"]},
  {id:"27", q:"프로젝트 팀 배정 기준은?", a:"과목 운영지침 및 담당교원 재량입니다.", kw:["팀배정"], tags:["#프로젝트"]},
  {id:"28", q:"프로젝트 결과물 소유권/공유는?", a:"일반 학칙·연구윤리 규정을 따릅니다.", kw:["소유권"], tags:["#주의","#프로젝트"]},
  {id:"29", q:"타과 주전공이 2·3학년 프로젝트를 선택 수강하면?", a:"장학 제외·전공학점 미포함. 이수 가능 여부는 운영계획을 확인하세요.", kw:["선택수강"], tags:["#프로젝트","#장학"]},
  {id:"30", q:"프로젝트로 취득한 학점의 최대 인정은?", a:"교과 편성 한도 내에서만 인정됩니다.", kw:["최대학점"], tags:["#프로젝트","#학점"]},

  // --- MSC/교양/기초필수 31~45 ---
  {id:"31", q:"MSC 과목은 전공학점으로 인정되나요?", a:"아니요. MSC는 전공학점이 아닌 총졸업학점으로만 인정.", kw:["MSC","전공학점"], tags:["#MSC","#졸업요건"]},
  {id:"32", q:"MSC 과목에는 무엇이 있나요?", a:"미분적분학·일반화학및실험·일반물리학및실험 등.", kw:["MSC 목록"], tags:["#MSC"]},
  {id:"33", q:"공대/자연대 주전공자가 MSC를 들으면?", a:"전공학점이 아닌 총졸업학점으로 인정.", kw:["공대","자연대"], tags:["#MSC"]},
  {id:"34", q:"전공기초필수 과목은 무엇인가요?", a:"각 주전공의 기초 전공과목(기초과학 제외 일부)은 전공학점에 포함될 수 있습니다.", kw:["전공기초필수"], tags:["#전공기초필수","#전공학점"]},
  {id:"35", q:"1학년 교양필수 학점은?", a:"35학점(한양인터칼리지 공통).", kw:["교양필수","35"], tags:["#교양필수","#1학년"]},
  {id:"36", q:"핵심교양·사회봉사·커리어개발2는?", a:"핵심교양 4, 사회봉사 1, 커리어개발2 1.", kw:["핵심교양","사회봉사","커리어개발2"], tags:["#교양필수","#커리어개발"]},
  {id:"37", q:"커리어개발2는 어디서 들어야 하나요?", a:"주전공 학부(과) 개설로 수강합니다.", kw:["커리어개발2","주전공"], tags:["#커리어개발","#주전공"]},
  {id:"38", q:"교양필수에서 F를 받으면?", a:"졸업 전 재수강 필수.", kw:["F","재수강"], tags:["#교양필수","#졸업요건"]},
  {id:"39", q:"영어/수학 배치고사 결과는 전공선택에 영향?", a:"직접 영향은 없으나 이수계획 수립에 참고하세요.", kw:["배치고사"], tags:["#안내"]},
  {id:"40", q:"1학년 공통교과 예시는?", a:"Systems/Design Thinking, Make Core, ACD Thinking 등.", kw:["공통교과"], tags:["#1학년","#교양필수"]},
  {id:"41", q:"선형대수/공업수학은 어디 포함?", a:"해당 전공의 전공기초필수(2~4학년)로 편성되어 전공학점 포함.", kw:["선형대수","공업수학"], tags:["#전공기초필수","#전공학점"]},
  {id:"42", q:"MSC 일부 면제가 가능한가요?", a:"면제 제도는 안내에 없으며, 이수는 졸업학점으로 반영됩니다.", kw:["MSC 면제"], tags:["#MSC","#주의"]},
  {id:"43", q:"교양필수 대체 과목이 있나요?", a:"대체 가능 과목은 학기별 공지 확인.", kw:["대체과목"], tags:["#교양필수","#주의"]},
  {id:"44", q:"사회봉사 이수 방식은?", a:"학내 가이드에 따라 지정 시수·절차로 이수.", kw:["사회봉사"], tags:["#교양필수"]},
  {id:"45", q:"커리어개발2 개설학과 변경 가능?", a:"주전공 변경 시 해당 학과 개설로 맞춰 이수하세요.", kw:["커리어개발2 변경"], tags:["#커리어개발","#변경"]},

  // --- 다중전공/부전공/마이크로전공 46~60 ---
  {id:"46", q:"프로그램 부전공은 필수인가요?", a:"네. 어떤 주전공이든 프로그램 1개 이상 부전공(24학점 이상) 이상 이수 필수.", kw:["프로그램 부전공"], tags:["#부전공","#프로그램"]},
  {id:"47", q:"일반 부전공 최소학점은?", a:"21학점(200~400단위 12 포함).", kw:["부전공 21"], tags:["#부전공"]},
  {id:"48", q:"프로그램 부전공 최소학점은?", a:"단위 구분 없이 24학점.", kw:["프로그램 부전공 24"], tags:["#프로그램","#부전공"]},
  {id:"49", q:"일반 다중전공 최소학점은?", a:"36학점(200~300단위 21 + 400단위 6 포함).", kw:["다중전공 36","400단위 6"], tags:["#다중전공"]},
  {id:"50", q:"프로그램 다중전공 최소학점은?", a:"36학점(400단위 6 포함).", kw:["프로그램 다중전공"], tags:["#다중전공","#프로그램"]},
  {id:"51", q:"건축학부 다중전공 기준은?", a:"총 100학점(100~300단위 60 + 400단위 18 포함).", kw:["건축","100학점"], tags:["#다중전공","#건축"]},
  {id:"52", q:"부전공 대신 다중전공으로 대체 가능한가요?", a:"가능합니다(마이크로전공은 대체 불가).", kw:["부전공 대체"], tags:["#다중전공","#부전공"]},
  {id:"53", q:"마이크로전공으로 프로그램 부전공 대체 가능?", a:"불가. 마이크로전공은 12학점 규모로 별도.", kw:["마이크로전공 12"], tags:["#마이크로전공","#부전공"]},
  {id:"54", q:"한양인터칼리지 프로그램 주전공자 추가전공 의무는?", a:"타 단과대학 전공 또는 다른 프로그램을 부전공 이상으로 추가 이수.", kw:["프로그램 주전공"], tags:["#주전공","#부전공","#프로그램"]},
  {id:"55", q:"주전공 400단위 이수 요건은?", a:"400단위 6학점 이상 이수.", kw:["400단위 6"], tags:["#전공학점","#졸업요건"]},
  {id:"56", q:"다중전공 400단위 요건은?", a:"일반/프로그램 다중전공 모두 400단위 6 포함.", kw:["다중전공 400단위"], tags:["#다중전공"]},
  {id:"57", q:"부전공·다중전공 학점 중복 가능?", a:"중복 인정 범위는 학사 규정에 따릅니다(일반적으로 구분별 충족 필요).", kw:["중복"], tags:["#학점","#주의"]},
  {id:"58", q:"다중전공 신청 시기/절차는?", a:"예: 11월 초~중 공지. 포털 신청 절차를 따릅니다.", kw:["다중전공 일정"], tags:["#일정","#다중전공","#절차"]},
  {id:"59", q:"부전공 포기/변경 가능한가요?", a:"학사 일정·절차에 따릅니다. 공지를 확인하세요.", kw:["부전공 변경"], tags:["#부전공","#절차"]},
  {id:"60", q:"다중전공 미이수 시 졸업에 영향?", a:"졸업요건 충족 실패로 이어질 수 있으니 사전 계획 필수.", kw:["미이수"], tags:["#다중전공","#졸업요건","#주의"]},

  // --- 학점/졸업/성적 61~70 ---
  {id:"61", q:"주전공 전공학점 최소는?", a:"48학점.", kw:["전공 48"], tags:["#전공학점","#졸업요건"]},
  {id:"62", q:"총 졸업학점은?", a:"140학점.", kw:["총졸업학점 140"], tags:["#졸업요건","#학점"]},
  {id:"63", q:"누적평점 기준은?", a:"주전공 신청 2.0 이상, 졸업은 학칙 기준 충족.", kw:["누평 2.0"], tags:["#성적","#졸업요건"]},
  {id:"64", q:"전공·교양·일반선택 구분 변경이 가능한가요?", a:"구분 변경은 제한되며, 학사팀 가이드에 따릅니다.", kw:["구분변경"], tags:["#학사행정","#주의"]},
  {id:"65", q:"패스/페일 과목이 전공학점에 포함되나요?", a:"교과 운영·규정에 따릅니다(전공학점 요건은 반드시 충족).", kw:["P/F"], tags:["#전공학점","#주의"]},
  {id:"66", q:"재수강 성적 처리 방식은?", a:"재수강 규정(최고등급 제한 등)에 따릅니다.", kw:["재수강 성적"], tags:["#성적","#학사행정"]},
  {id:"67", q:"학점 교류(타대/국제교류) 인정은?", a:"사전 승인 및 학점인정 규정을 따릅니다.", kw:["학점교류"], tags:["#학사행정","#주의"]},
  {id:"68", q:"졸업 유예/조기졸업이 가능한가요?", a:"학칙상 요건 충족 시 가능. 학사팀 문의.", kw:["졸업유예","조기졸업"], tags:["#졸업요건","#학사행정"]},
  {id:"69", q:"캡스톤/인턴십이 전공학점으로?", a:"편성·승인에 따름. 과목 가이드를 확인.", kw:["캡스톤","인턴십"], tags:["#전공학점","#주의"]},
  {id:"70", q:"온라인 과목 이수 제한이 있나요?", a:"학기별 지침을 따릅니다.", kw:["온라인"], tags:["#주의","#학사행정"]},

  // --- 일정/절차 71~76 ---
  {id:"71", q:"전공설명회 수요조사 일정은?", a:"예: 9/18~9/22. 매년 공지 확인.", kw:["수요조사"], tags:["#전공설명회","#일정"]},
  {id:"72", q:"전공설명회 본행사 일정은?", a:"예: 10월 중. 공지 우선.", kw:["전공설명회"], tags:["#전공설명회","#일정"]},
  {id:"73", q:"주전공 신청 기간은?", a:"예: 10/30~11/5.", kw:["주전공 신청"], tags:["#주전공","#일정"]},
  {id:"74", q:"다중전공 신청 기간은?", a:"예: 11/10~11/14.", kw:["다중전공 신청"], tags:["#다중전공","#일정"]},
  {id:"75", q:"자격요건 심의 및 확정은?", a:"예: 2026.01.", kw:["심의","확정"], tags:["#일정","#주전공","#다중전공"]},
  {id:"76", q:"온라인 신청 절차는?", a:"학교 포털 → 공지 절차를 따릅니다. 추가서류는 공지 참조.", kw:["온라인 절차"], tags:["#절차","#학사행정"]},

  // --- 행정/기타 77~80 ---
  {id:"77", q:"학적 변동(휴학/복학)이 전공이수에 미치는 영향은?", a:"학기·과목 편성에 영향 가능. 수강계획을 재조정하세요.", kw:["휴학","복학"], tags:["#주의","#학사행정"]},
  {id:"78", q:"장학/지원 제도는 어디서 확인하나요?", a:"장학 공지·학생지원팀 안내를 확인.", kw:["장학","지원"], tags:["#장학","#안내"]},
  {id:"79", q:"규정 변경 시 누가 기준인가요?", a:"항상 최신 공식 공지·학칙이 우선합니다.", kw:["규정변경"], tags:["#주의","#안내"]},
  {id:"80", q:"문의 창구는 어디인가요?", a:"학과 행정실/학사팀/공식 게시판을 이용하세요.", kw:["문의"], tags:["#안내","#학사행정"]}
];

/* =========================
   3) 태그 렌더링
   ========================= */
const filtersEl = document.getElementById('filters');
const selectedTags = new Set();
function renderTagGroups(){
  filtersEl.innerHTML = '';
  Object.entries(TAG_SETS).forEach(([group, tags])=>{
    const row = document.createElement('div'); row.className = 'filter-row';
    row.innerHTML = `<h3>${group}</h3><div class="chips"></div>`;
    const chips = row.querySelector('.chips');
    tags.forEach(tag=>{
      const btn = document.createElement('button');
      btn.className = 'chip'; btn.type='button';
      btn.setAttribute('data-on', selectedTags.has(tag) ? 'true' : 'false');
      btn.textContent = tag;
      btn.addEventListener('click', ()=>{
        if(selectedTags.has(tag)){ selectedTags.delete(tag); btn.setAttribute('data-on','false'); }
        else { selectedTags.add(tag); btn.setAttribute('data-on','true'); }
        update();
      });
      chips.appendChild(btn);
    });
    filtersEl.appendChild(row);
  });
}

/* =========================
   4) 검색/스코어링/하이라이트
   ========================= */
const qInput = document.getElementById('q');
const resultsEl = document.getElementById('results');
const countEl = document.getElementById('count');
const searchForm = document.getElementById('searchForm');
const clearBtn = document.getElementById('clearBtn');
const shareBtn = document.getElementById('shareBtn');

function normalize(s){ return (s??'').toString().toLowerCase().replace(/\s+/g,' ').trim(); }

// 동의어 확장
function expandQuery(q){
  const base = [q];
  const key = normalize(q);
  Object.entries(SYNONYMS).forEach(([k, arr])=>{
    if(key.includes(k) || arr.some(v=> key.includes(normalize(v)))) base.push(k, ...arr);
  });
  return Array.from(new Set(base.map(x=>x.trim()).filter(Boolean)));
}

function scoreEntry(entry, queryTerms, tagModeAND=true){
  // 태그 필터
  if(selectedTags.size>0){
    const has = Array.from(selectedTags).map(t=> entry.tags.includes(t));
    if(tagModeAND && !has.every(Boolean)) return 0;
    if(!tagModeAND && !has.some(Boolean)) return 0;
  }
  let score = 0;
  const hay = normalize(entry.q + ' ' + entry.a + ' ' + entry.kw.join(' '));
  queryTerms.forEach(nq=>{
    const term = normalize(nq);
    if(!term) return;
    if(hay.includes(term)) score += 6;
    entry.kw.forEach(k=>{
      const nk = normalize(k);
      if(nk === term) score += 5;
      else if(nk.includes(term) || term.includes(nk)) score += 3;
    });
    term.split(' ').forEach(tok=>{
      if(tok.length>1 && hay.includes(tok)) score += 1;
    });
  });
  // 태그 자체 가중(선택한 태그와 겹치면 +1)
  entry.tags.forEach(t=>{ if(selectedTags.has(t)) score += 1; });
  // 기본 노출
  if(score===0 && selectedTags.size===0 && queryTerms.join('').trim()==='') score = 1;
  return score;
}

function highlight(text, query){
  const esc = query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  try{ return text.replace(new RegExp(`(${esc})`,'gi'), '<span class="hl">$1</span>'); }
  catch{ return text; }
}

/* =========================
   5) 검색/렌더
   ========================= */
function search(query, tagMode){
  const terms = expandQuery(query);
  return faqData
    .map(e => ({entry:e, score:scoreEntry(e, terms, tagMode==='AND')}))
    .filter(r => r.score > 0)
    .sort((a,b)=> b.score - a.score)
    .map(r => r.entry);
}

function render(list, query){
  resultsEl.innerHTML = '';
  if(list.length===0){
    resultsEl.innerHTML = `<div class="empty">결과가 없습니다. 검색어를 바꾸거나 태그 선택을 확인해 주세요.</div>`;
    countEl.textContent = '0';
    return;
  }
  countEl.textContent = String(list.length);
  for(const e of list){
    const card = document.createElement('article');
    card.className = 'card'; card.id = `q${e.id}`;
    card.innerHTML = `
      <div class="qline">
        <span class="badge">Q${e.id}</span>
        <h3>${highlight(e.q, query)}</h3>
        <span class="alink" role="button" title="링크 복사" data-id="${e.id}">🔗 복사</span>
      </div>
      <div class="answer">${highlight(e.a, query)}</div>
      <div class="tags">${e.tags.map(t=>`<span class="tag">${t}</span>`).join(' ')}</div>
    `;
    card.querySelector('.alink').addEventListener('click', (ev)=>{
      const id = ev.currentTarget.getAttribute('data-id');
      const url = new URL(location.href);
      url.hash = `#q${id}`;
      const qv = qInput.value.trim();
      if(qv) url.searchParams.set('q', qv); else url.searchParams.delete('q');
      if(selectedTags.size) url.searchParams.set('tags', [...selectedTags].join(','));
      else url.searchParams.delete('tags');
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(url.toString()).then(()=>{
          ev.currentTarget.textContent = '✅ 복사됨';
          setTimeout(()=>{ ev.currentTarget.textContent='🔗 복사'; },1200);
        });
      } else {
        window.prompt("아래 링크를 복사하세요:", url.toString());
      }
    });
    resultsEl.appendChild(card);
  }
}

function update(push=true){
  const query = qInput.value;
  const tagMode = (document.querySelector('input[name="tagMode"]:checked')?.value)||'AND';
  const list = search(query, tagMode);
  render(list, query);
  if(push){
    const url = new URL(location.href);
    if(query.trim()) url.searchParams.set('q', query.trim()); else url.searchParams.delete('q');
    if(selectedTags.size) url.searchParams.set('tags', [...selectedTags].join(','));
    else url.searchParams.delete('tags');
    url.searchParams.set('mode', tagMode);
    history.replaceState(null,'',url.toString());
  }
}

/* =========================
   6) 초기화 & 이벤트
   ========================= */
function initFromQuery(){
  const params = new URLSearchParams(location.search);
  const q = params.get('q') || '';
  qInput.value = q;
  const tagQuery = params.get('tags');
  if(tagQuery){ tagQuery.split(',').forEach(t=> selectedTags.add(t)); }
  renderTagGroups();
  // 태그 선택 반영
  document.querySelectorAll('.chip').forEach(chip=>{
    const label = chip.textContent.trim();
    if(selectedTags.has(label)) chip.setAttribute('data-on','true');
  });
  // 모드
  const mode = params.get('mode') || 'AND';
  const radio = document.querySelector(`input[name="tagMode"][value="${mode}"]`);
  if(radio) radio.checked = true;
  update(false);
}

renderTagGroups();
initFromQuery();

searchForm.addEventListener('submit', (e)=>{ e.preventDefault(); update(); });
qInput.addEventListener('input', ()=> update());
clearBtn.addEventListener('click', ()=>{
  qInput.value = '';
  selectedTags.clear();
  renderTagGroups();
  update();
});
document.querySelectorAll('input[name="tagMode"]').forEach(r=>{
  r.addEventListener('change', ()=> update());
});
shareBtn.addEventListener('click', ()=>{
  const url = new URL(location.href);
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(url.toString()).then(()=>{
      shareBtn.textContent='복사됨 ✅'; setTimeout(()=>shareBtn.textContent='링크 복사',1200);
    });
  } else {
    window.prompt("아래 링크를 복사하세요:", url.toString());
  }
});
if(location.hash){
  const el = document.querySelector(location.hash);
  if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
}
</script>
</body>
</html>
